# π¥MediBookerπ¥

<img src="./img/medibooker.jpeg" alt="Medibooker" width="1000" height="750"/>

---

## ν€λ…: JJOB_DOC

### ν€μ›

|ν€μ¥|ν€μ›|ν€μ›|
|---|---|---|
|<img src="./img/μ§€μ€.png" width="100" height="100">|<img src="./img/μ°½ν„.png" width="100" height="100">|<img src="./img/μν„.jpg" width="100" height="100">|
|κΉ€μ§€μ€|κΉ€μ°½ν„|λ°•μν„|

---

## π“Ά ν”„λ΅μ νΈ μ†κ°
MediBookerλ” ν™μμ™€ λ³‘μ› λ¨λ‘κ°€ μ‚¬μ©ν•  μ μλ” νμ‹ μ μΈ μλ£ μμ•½ μ„λΉ„μ¤μ…λ‹λ‹¤. μ΄ ν”„λ΅μ νΈλ” ν™μλ“¤μ΄ κ°„νΈν•κ² λ³‘μ›μ— μ ‘μν•κ³  μμ‹ μ λ€κΈ° μλ²μ„ ν™•μΈν•λ©°, μ§„λ£ λ‚΄μ—­κ³Ό μ²λ°© λ‚΄μ—­μ„ μ‰½κ² ν™•μΈν•  μ μλ„λ΅ κ°λ°λμ—μµλ‹λ‹¤.

νΉν μ§§μ€ μ‹κ°„ λ‚΄μ— λ³‘μ›μ„ μ΄μ©ν•΄μ•Ό ν•λ” μ§μ¥μΈλ“¤μ€ μ›κ²© λ€κΈ° κΈ°λ¥μ„ ν†µν•΄ λ€κΈ° μ‹κ°„μ„ μ¤„μ΄κ³ , λ³µμ΅ν• μ ‘μ κ³Όμ •μ„ μƒλµν•  μ μμµλ‹λ‹¤. λ” λ‚μ•„κ°€, μ§„λ£ λ‚΄μ—­μ„ λλ” μ²λ°© λ‚΄μ—­μ„λ¥Ό λ°›κΈ° μ„ν•΄ λ³‘μ›μ„ λ°©λ¬Έν•κ±°λ‚ ν©μ¤λ¥Ό μ΄μ©ν•λ” λ¶νΈμ„ ν•΄μ†ν•κ³ , λ¨λ°”μΌ μ„λΉ„μ¤λ¥Ό ν†µν•΄ μ΄λ¥Ό κ°„νΈν•κ² ν™•μΈν•  μ μμ–΄ νΈλ¦¬ν•¨μ΄ μ¦λ€λ©λ‹λ‹¤.

λ³‘μ› μΈ΅μ—μ„λ” μ΄ μ„λΉ„μ¤λ¥Ό ν†µν•΄ ν™μμ μ ‘μλ¥Ό λ³΄λ‹¤ ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•κ³ , μ§„λ£ λ‚΄μ—­κ³Ό μ²λ°© λ‚΄μ—­μ„ μ κ³µν•  μ μμµλ‹λ‹¤. μ›κ²© μ ‘μμ™€ μ‚¬μ©μ μΈμ¦μ„ ν†µν•΄ λ³µμ΅ν• μ ‘μ μ μ°¨μ™€ ν™μ μ •λ³΄ μ…λ ¥ κ³Όμ •μ„ κ°„μ†ν™”ν•  μ μμµλ‹λ‹¤.

---
## π’΅ ν”„λ΅μ νΈ λ°°κ²½ λ° ν•„μ”μ„±
<div style="display: flex; justify-content: space-between;">
    <img src="./img/iden.jpeg" alt="μλ£ μ„λΉ„μ¤ μ‹ λ¶„μ¦ ν™•μΈ μλ¬΄ν™”" width="400" height="400"/>
    <img src="./img/pass.jpeg" alt="μλ£ μ„λΉ„μ¤ μ‹ λ¶„μ¦ ν™•μΈ μλ¬΄ν™”" width="400" height="400"/>
</div>

μµκ·Ό μλ£ μ„λΉ„μ¤ κ΄€λ ¨ λ²•μ΄ κ°μ •λμ–΄ λ³‘μ› λ°©λ¬Έ μ‹ μ‹ λ¶„μ¦ μ μ‹κ°€ ν•„μκ°€ λμ—μµλ‹λ‹¤. μ΄μ™€ κ°™μ€ μλ£ μ λ„λ” μ§€κ°‘μ„ λ“¤κ³  λ‹¤λ‹μ§€ μ•κ³  μ‚Όμ„±νμ΄, μ• ν”νμ΄ λ“± νμ΄ μ•±μ„ μ‚¬μ©ν•λ” μ‚¬μ©μλ“¤μ—κ² ν° λ¶νΈν•¨μ„ μ΄λν•©λ‹λ‹¤. λ¬Όλ΅  ν¨μ¤ μ•± λ“±μ„ ν†µν•΄ μ‹ λ¶„μ¦ ν™•μΈμ΄ κ°€λ¥ν•μ§€λ§, λ³‘μ›μ—μ„ ν¨μ¤ μ•±μ„ ν†µν• μ‹ λ¶„μ¦ ν™•μΈ λ° λ³ΈμΈ μΈμ¦μ€ μ ‘μ μ‹ νΌμ΅μ„ κ°€μ¤‘μ‹ν‚¬ μ μλ” λ‹¨μ μ΄ μ΅΄μ¬ν•©λ‹λ‹¤.

λν•, λ³‘μ›μ—μ„ μ ‘μλ¥Ό λ§μΉ ν›„ μμ‹ μ μλ²μ„ ν™•μΈν•κΈ° μ–΄λ ¤μ› λ€κΈ° μ‹κ°„μ„ νμ•…ν•λ” λ° λ¶νΈν•¨μ΄ μμΌλ©°, ν‰μΌμ— μ‹κ°„μ΄ λ¶€μ΅±ν• μ§μ¥μΈλ“¤μ—κ²λ” λ”μ± ν° λ¶νΈμ„ μ•ΌκΈ°ν•©λ‹λ‹¤.

μ΄λ¬ν• λ¶νΈν•¨μ„ ν•΄κ²°ν•κ³ μ, μ°λ¦¬ JJOBDAK ν€μ€ μ›κ²© μ¤„μ„κΈ° μ„λΉ„μ¤λ¥Ό κ°λ°ν•κΈ°λ΅ ν–μµλ‹λ‹¤. μ΄ μ„λΉ„μ¤λ¥Ό ν†µν•΄ μ ‘μμ™€ λ€κΈ° μ‹κ°„μ— λ€ν• λ¶νΈμ„ ν•΄μ†ν•  λΏλ§ μ•„λ‹λΌ, μ–΄ν”λ¦¬μΌ€μ΄μ…μ„ ν†µν•΄ μ§„λ£ λ‚΄μ—­κ³Ό μ²λ°© λ‚΄μ—­μ„ ν™•μΈν•κ³  μ κ³µλ°›μ„ μ μμ–΄ μ‚¬μ©μλ“¤μ—κ² ν° νΈλ¦¬ν•¨μ„ μ κ³µν•  μ μμ„ κ²ƒμ…λ‹λ‹¤.

---
## π—“οΈ κ°λ°μΌμ •
<img src="./img/WBS.png" alt="κ°λ°μΌμ •(WBS)" width="1000" height="500"/>

## π“ μ”κµ¬μ‚¬ν•­μ •μμ„
<img src="./img/μ”κµ¬μ‚¬ν•­μ •μμ„.png" alt="μ”κµ¬μ‚¬ν•­μ •μμ„" width="1000" height="500"/>

## π“‹ ERD
<img src="./img/ERD_final.png" alt="ERD" width="1000" height="700"/>

## π–οΈ μ£Όμ” μΏΌλ¦¬ μ”μ•½
1. DDL
```sql
-- ν™μ ν…μ΄λΈ” μƒμ„±
CREATE TABLE Patients (
    patient_id INT PRIMARY KEY AUTO_INCREMENT,
    patient_name VARCHAR(30) NOT NULL,
    identity_number VARCHAR(20) NOT NULL UNIQUE,
    patient_phone VARCHAR(20) NOT NULL UNIQUE,
    address VARCHAR(255) NOT NULL,
    patient_authentication ENUM('N', 'Y') DEFAULT 'Y',
    del_yn ENUM('N', 'Y') DEFAULT 'N'
);
```



```sql
-- μ§„λ£κΈ°λ΅ ν…μ΄λΈ”
CREATE TABLE Medical_Records (
    record_id INT PRIMARY KEY AUTO_INCREMENT,
    patient_id INT NOT NULL,
    doctor_id INT NOT NULL,
    department_id INT NOT NULL,
    manager_id INT NOT NULL,
    diagnosis VARCHAR(255) NOT NULL,
    treatment TEXT NOT NULL,
    prescription VARCHAR(255) NOT NULL,
    visit_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    del_yn ENUM('N', 'Y') DEFAULT 'N',
    FOREIGN KEY (patient_id) REFERENCES Patients (patient_id),
    FOREIGN KEY (doctor_id) REFERENCES Doctors (doctor_id),
    FOREIGN KEY (manager_id) REFERENCES Manager (manager_id),
    FOREIGN KEY (department_id) REFERENCES Departments (department_id)
);
```
[β–Ί DDL μ „μ²΄ μΏΌλ¦¬](./SQL/DDL.sql)


2. DML
```sql
-- Patients λ°μ΄ν„° μ‚½μ…
INSERT INTO Patients (patient_name, identity_number, patient_phone, address, patient_authentication) VALUES
('κΉ€μ„ λΏ΅', '123456-1234567', '010-1234-5678', 'μ„μΈνΉλ³„μ‹ κ°•λ‚¨κµ¬ ν…ν—¤λ€λ΅ 123', 'Y'),
('μ΄μν¬', '654321-7654321', '010-8765-4321', 'μ„μΈνΉλ³„μ‹ κ°•λ‚¨κµ¬ ν…ν—¤λ€λ΅ 456', 'Y'),
('λ°•λ―Όμ', '111222-2345678', '010-1111-2222', 'μ„μΈνΉλ³„μ‹ μ„μ΄κµ¬ κ°•λ‚¨λ€λ΅ 789', 'Y'),
('μµμ§€ν„', '333444-3456789', '010-3333-4444', 'μ„μΈνΉλ³„μ‹ μ„μ΄κµ¬ μ„μ΄λ€λ΅ 101', 'Y'),
('μ •μλΉ', '555666-4567890', '010-5555-6666', 'μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ¬λ¦Όν”½λ΅ 202', 'Y'),
('ν•μμ§„', '777888-5678901', '010-7777-8888', 'μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ κ°€λ½λ΅ 303', 'Y'),
('μ¤μ§„μ°', '999000-6789012', '010-9999-0000', 'μ„μΈνΉλ³„μ‹ κ°•λ™κµ¬ μ²νΈλ€λ΅ 404', 'Y'),
('κΉ€ν•λ', '112233-7890123', '010-1122-3344', 'μ„μΈνΉλ³„μ‹ κ°•λ™κµ¬ κ°•λ™λ€λ΅ 505', 'Y'),
('μ΄μ„μ¤€', '445566-8901234', '010-4455-6677', 'μ„μΈνΉλ³„μ‹ κ΄€μ•…κµ¬ μ‹ λ¦Όλ΅ 606', 'Y'),
('μ¥λ―ΌνΈ', '778899-9012345', '010-7788-9900', 'μ„μΈνΉλ³„μ‹ κ΄€μ•…κµ¬ λ΄‰μ²λ΅ 707', 'Y'),
('μ¤μ§€μ', '001122-0123456', '010-0011-2233', 'μ„μΈνΉλ³„μ‹ λ™μ‘κµ¬ μ‚¬λ‹Ήλ΅ 808', 'Y'),
('λ°°λ―Όμ •', '334455-1234567', '010-3344-5566', 'μ„μΈνΉλ³„μ‹ λ™μ‘κµ¬ μƒλ„λ΅ 909', 'Y');
```


```sql
-- Medical_Records λ°μ΄ν„° μ‚½μ…
INSERT INTO Medical_Records (patient_id, doctor_id, department_id, manager_id, diagnosis, treatment, prescription, visit_date) VALUES
(1, 1, 1, 1, 'κ³ νμ••', 'μƒν™ μµκ΄€ κ°μ„ ', 'μ•½λ¬Ό A', '2024-01-15 10:00:00'),
(2, 2, 2, 2, 'νΈλ‘ν†µ', 'ν΄μ‹κ³Ό μ•½λ¬Ό λ³µμ©', 'μ•½λ¬Ό B', '2024-02-20 11:30:00'),
(3, 3, 3, 3, 'κ³¨μ ', 'μμ  λ° λ¬Όλ¦¬ μΉλ£', 'μ•½λ¬Ό C', '2024-03-10 09:00:00'),
(4, 4, 1, 1, 'λ‹Ήλ‡¨λ³‘', 'μ΄λ™ λ° μ‹μ΄ μ”λ²•', 'μ•½λ¬Ό D', '2024-04-25 14:00:00'),
(5, 5, 2, 2, 'λΉ„μ—Ό', 'ν•­νμ¤νƒ€λ―Όμ  λ³µμ©', 'μ•½λ¬Ό E', '2024-05-15 13:00:00'),
(6, 1, 1, 1, 'κ°κΈ°', 'μ¶©λ¶„ν• ν΄μ‹', 'μ•½λ¬Ό F', '2024-06-05 10:30:00'),
(7, 2, 2, 2, 'μ²μ‹', 'κΈ°κ΄€μ§€ ν™•μ¥μ ', 'μ•½λ¬Ό G', '2024-07-10 12:00:00'),
(8, 3, 3, 3, 'κ΄€μ μ—Ό', 'λ¬Όλ¦¬ μΉλ£', 'μ•½λ¬Ό H', '2024-08-20 15:30:00'),
(9, 4, 1, 1, 'κ³ μ§€νμ¦', 'μ‹μ΄ μ”λ²•', 'μ•½λ¬Ό I', '2024-09-10 11:00:00'),
(10, 5, 2, 2, 'μ¤‘μ΄μ—Ό', 'ν•­μƒμ  λ³µμ©', 'μ•½λ¬Ό J', '2024-10-15 16:00:00');
```
[β–Ί DML μ „μ²΄ μΏΌλ¦¬](./SQL/DML.sql)

3. PROCEDURE
```sql
DELIMITER / /

CREATE PROCEDURE InsertMediRecord(
    IN patient_id_param INT,
    IN doctor_id_param INT,
    IN diagnosis_param TEXT,
    IN treatment_param TEXT,
    IN prescription_param TEXT
)
BEGIN
    -- doctor_id λ΅ department_id κ°€μ Έμ¤κΈ°
    -- department_id λ΅ manger_id κ°€μ Έμ¤κΈ°
    -- μ§„λ£κΈ°λ΅μ— μ‚½μ…
    DECLARE department_id INT;
    DECLARE manager_id INT;
    DECLARE vacation_day ENUM('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
    DECLARE doctor_name VARCHAR(10);
    DECLARE record_count INT;

    -- μμ‚¬ μ΄λ¦„ μ΅°ν
    SELECT d.doctor_name INTO doctor_name
    FROM Doctors d
    WHERE d.doctor_id = doctor_id_param;

    -- μμ‚¬IDλ΅ μ§„λ£κ³Ό μ΅°ν
    SELECT d.department_id INTO department_id
    FROM Doctors d
    where d.doctor_id = doctor_id_param;

    -- μ§„λ£κ³ΌIDλ΅ κ΄€λ¦¬μID μ΅°ν
    SELECT m.manager_id INTO manager_id
    FROM Manager m
    where department_id = m.department_id;

    -- μ…λ ¥ν• λ°μ΄ν„°κ°€ λ€κΈ° λ©λ΅μ— μ—†μΌλ©΄ μ¤λ¥ λ©”μ‹μ§€ μ¶λ ¥
    SELECT COUNT(*)
    INTO record_count
    FROM Waiting w
    WHERE patient_id_param = w.patient_id && doctor_id_param = w.doctor_id;

    IF record_count = 0 THEN
        SET @error_message = CONCAT('μ…λ ¥ν• μ •λ³΄κ°€ λ€κΈ° λ©λ΅μ— μ΅΄μ¬ν•μ§€ μ•μµλ‹λ‹¤.');
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = @error_message;
    END IF;

    -- μμ‚¬ ν΄λ¬΄μΌμ— λ€ν• μ§„λ£ κΈ°λ΅ μ‘μ„± μ‹ μ¤λ¥ λ©”μ‹μ§€ μ¶λ ¥
    SELECT s.vacation_date INTO vacation_day
    FROM Schedules s
    WHERE s.doctor_id = doctor_id_param;

    IF vacation_day = DAYNAME(CURDATE()) THEN
        SET @error_message = CONCAT(doctor_name, ' μ„ μƒλ‹μ€ μ¤λ ν΄λ¬΄μ…λ‹λ‹¤. ');
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = @error_message;
    END IF;

    INSERT INTO Medical_Records (patient_id, doctor_id, department_id, manager_id, diagnosis, treatment, prescription)
    VALUES (patient_id_param, doctor_id_param, department_id, manager_id, diagnosis_param, treatment_param, prescription_param);

    -- Waiting ν…μ΄λΈ”μ—μ„ ν™μ κΈ°λ΅ μ‚­μ 
    DELETE FROM Waiting
    WHERE patient_id_param = Waiting.patient_id;

END //

DELIMITER;
```

## π ν…μ¤νΈμΌ€μ΄μ¤ 
[β–Ί ν…μ¤νΈμΌ€μ΄μ¤ - μΆ…ν•©](./TestCase_result)

[β–Ί ν…μ¤νΈμΌ€μ΄μ¤ - μ ‘μ](./TestCase_result/InsertOrUpdateProcedur.md)

[β–Ί ν…μ¤νΈμΌ€μ΄μ¤ - μ§„λ£](./TestCase_result/InsertMediRecordProcedure.md)

[β–Ί ν…μ¤νΈμΌ€μ΄μ¤ - ν”Όλ“λ°±](./TestCase_result/AddFeedbackAndUpdateRatingProcedure.md)
 
 ---

## π‰ νκ³ 
- κΉ€μ§€μ€
    - DBμ— λ€ν•΄ νκ³  λ“¤μλ΅ λ‚ν•΄ν•΄μ§€λ” μ–΄λ ¤μ›€μ΄ μμ—μ§€λ§ ν€μ›λ“¤κ³Ό μκ²¬μ„ λ‚λ„λ” κ³Όμ •μ„ ν†µν•΄ λ§μ΄ λ°°μΈ μ μλ” μΆ‹μ€ κ²½ν—μ΄μ—λ‹¤.

- λ°•μν„
    - μμ •ν•λ©΄ ν• μλ΅ μ΄κ²λ§λ‚?λΌλ” μƒκ°μ΄ κ³„μ†ν•΄μ„ λ“¤μ—μ§€λ§ μκ²¬μ„ λ‚λ„λ©΄μ„ μ μ  DBμ— λ€ν• κ°λ…μ΄ μ΅ν€κ°€λ” κΈ°λ¶„μ΄ λ“¤μ—μµλ‹λ‹¤. λ„κµ°κ°€ ν—·κ°λ¦¬λ” λ¶€λ¶„μ„ λ‹¤λ¥Έ ν€μ›μ΄ λ°”λ΅μ΅μ•„μ£Όλ” κ³Όμ •μ„ κ²μΌλ©΄μ„ ν”„λ΅μ νΈλ¥Ό μ λ§λ¬΄λ¦¬ν•  μ μμ—μµλ‹λ‹¤. 

- κΉ€μ°½ν„
    - DB ν”„λ΅μ νΈλ¥Ό μ§„ν–‰ν•λ©΄μ„ μ™Έλν‚¤ μ μ•½ μ΅°κ±΄μ— λ€ν•΄ κΉμ΄ μ΄ν•΄ν•  μ μμ—κ³ , UI μ—†μ΄ κµ¬ν„ν•λ‹¤λ” κ²ƒμ΄ μƒκ°λ³΄λ‹¤ μ–΄λ µλ‹¤λ” κ²ƒμ„ κΉ¨λ‹¬μ•μµλ‹λ‹¤. ν•μ§€λ§ μΆ‹μ€ ν€μ›λ“¤κ³Ό μ£Όλ§μ— λ¨μ—¬ ν•¨κ» μ‹κ°„μ„ λ³΄λ‚΄λ©° λ…Έλ ¥ν• λ•λ¶„μ—, ν¬κΈ°ν•μ§€ μ•κ³  λκΉμ§€ ν”„λ΅μ νΈλ¥Ό μ™„μν•κ³  μΆ‹μ€ κ²°κ³Όλ¥Ό μ–»μ„ μ μμ—μµλ‹λ‹¤. 
